{"mappings":"sgBAAA,IAAAA,EAAAC,EAAA,SAsFA,SAASC,IAGP,OAFa,IAAIC,MAELC,S,CAvFEC,SAASC,cAAc,sBAE/BC,iBAAiB,SAEzBC,eAAuBC,GACrB,GAA6B,WAAzBA,EAAMC,OAAOC,QAAsB,CACrCF,EAAMC,OAAOE,WAAWC,SAAS,GAAGC,UAAUC,OAC5C,wBAGsD,oBAApDN,EAAMC,OAAOE,WAAWC,SAAS,GAAGG,YACtCP,EAAMC,OAAOE,WAAWC,SAAS,GAAGG,YAAc,uBAEE,yBAApDP,EAAMC,OAAOE,WAAWC,SAAS,GAAGG,cAEpCP,EAAMC,OAAOE,WAAWC,SAAS,GAAGG,YAAc,mBAGpD,MAAMC,EAAgBR,EAAMC,OAAOE,WAAWA,WAAWA,WAEnDM,EAAU,CACdC,GAAIF,EAAcG,WAAW,GAAGC,UAChCC,IAAKL,EAAcJ,SAAS,GAAGA,SAAS,GAAGU,IAC3CC,IAAKP,EAAcJ,SAAS,GAAGA,SAAS,GAAGW,IAC3CC,MAAOR,EAAcJ,SAAS,GAAGG,YACjCU,MAAOT,EAAcJ,SAAS,GAAGG,YACjCW,YAAaV,EAAcJ,SAAS,GAAGA,SAAS,GAAGG,YACnDY,KAAMX,EAAcJ,SAAS,GAAGA,SAAS,GAAGgB,KAC5CC,SAAUb,EAAcJ,SAAS,GAAGA,SAAS,GAAGG,aAElD,IACE,MAAMe,QAAuB/B,EAAAgC,MAAMC,WAAW,cAC9C,IAAIC,EAAW,KAGVA,EADAH,EACWA,EAAeb,EAAQC,IADPY,EA6CtC,SAAkCG,EAAUhB,GACrCgB,EACAlC,EAAAgC,MAAMG,WAAW,aAAcjB,EAAQC,IAD7BnB,EAAAgC,MAAMI,QAAQ,aAAclB,EAAQC,GAAID,E,CA3CnDmB,CAAyBH,EAAUhB,E,CACnC,MAAOoB,GACPC,QAAQC,IAAIF,E,EAMhB,GAAiC,cAA7B7B,EAAMC,OAAOM,YAA6B,CAC5CP,EAAMC,OAAOI,UAAU2B,IAAI,wBAE3B,MAAMxB,EAAgBR,EAAMC,OAAOE,WAAWA,WAExCM,EAAU,CACdwB,KAAMxC,IACNiB,GAAIF,EAAcG,WAAW,GAAGC,UAChCC,IAAKL,EAAcJ,SAAS,GAAGA,SAAS,GAAGU,IAC3CC,IAAKP,EAAcJ,SAAS,GAAGA,SAAS,GAAGW,IAC3CC,MAAOR,EAAcJ,SAAS,GAAGG,YACjCU,MAAOT,EAAcJ,SAAS,GAAGG,YACjCW,YAAaV,EAAcJ,SAAS,GAAGA,SAAS,GAAGG,YACnDY,KAAMX,EAAcJ,SAAS,GAAGA,SAAS,GAAGgB,KAC5CC,SAAUb,EAAcJ,SAAS,GAAGA,SAAS,GAAGG,aAElD,IACE,MAAM2B,QAAqB3C,EAAAgC,MAAMC,WAAW,YAC5C,IAAIC,EAAW,KAEVA,EADAS,EACWA,EAAazB,EAAQC,IADPwB,EAUpC,SAA4BT,EAAUhB,GACpC,GAAKgB,EACA,OADUlC,EAAAgC,MAAMI,QAAQ,WAAYlB,EAAQC,GAAID,E,CARjD0B,CAAmBV,EAAUhB,E,CAC7B,MAAOoB,GACPC,QAAQC,IAAIF,E","sources":["src/scripts/common/newsCardFromStorage.js"],"sourcesContent":["import { users } from '../common/fetchUser';\n\nconst gallery = document.querySelector('.gallery-container');\n\ngallery.addEventListener('click', onClick); // повесить слушателя на галерею\n\nasync function onClick(event) {\n  if (event.target.tagName === 'BUTTON') {\n    event.target.parentNode.children[0].classList.toggle(\n      'js-favourite-storage'\n    );\n\n    if (event.target.parentNode.children[0].textContent === 'Add to favorite') {\n      event.target.parentNode.children[0].textContent = 'Remove from favorite';\n    } else if (\n      event.target.parentNode.children[0].textContent === 'Remove from favorite'\n    ) {\n      event.target.parentNode.children[0].textContent = 'Add to favorite';\n    }\n\n    const arrayChildren = event.target.parentNode.parentNode.parentNode;\n\n    const newData = {\n      id: arrayChildren.attributes[1].nodeValue,\n      img: arrayChildren.children[0].children[1].src,\n      alt: arrayChildren.children[0].children[1].alt,\n      title: arrayChildren.children[1].textContent,\n      descr: arrayChildren.children[2].textContent,\n      dateArticle: arrayChildren.children[3].children[0].textContent,\n      link: arrayChildren.children[3].children[1].href,\n      category: arrayChildren.children[0].children[0].textContent,\n    };\n    try {\n      const favouriteLinks = await users.getAllData('favourites');\n      let myResult = null;\n\n      if (!favouriteLinks) myResult = favouriteLinks;\n      else myResult = favouriteLinks[newData.id];\n\n      refreshFavouritesStorage(myResult, newData);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  //--------------------Read more--------------------------------\n\n  if (event.target.textContent === 'Read more') {\n    event.target.classList.add('js-read-more-storage');\n\n    const arrayChildren = event.target.parentNode.parentNode;\n\n    const newData = {\n      date: getDateForCreateObjToStorage(),\n      id: arrayChildren.attributes[1].nodeValue,\n      img: arrayChildren.children[0].children[1].src,\n      alt: arrayChildren.children[0].children[1].alt,\n      title: arrayChildren.children[1].textContent,\n      descr: arrayChildren.children[2].textContent,\n      dateArticle: arrayChildren.children[3].children[0].textContent,\n      link: arrayChildren.children[3].children[1].href,\n      category: arrayChildren.children[0].children[0].textContent,\n    };\n    try {\n      const readMoreList = await users.getAllData('readMore');\n      let myResult = null;\n      if (!readMoreList) myResult = readMoreList;\n      else myResult = readMoreList[newData.id];\n\n      refreshLinkStorage(myResult, newData);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}\n\nfunction refreshLinkStorage(myResult, newData) {\n  if (!myResult) users.setData('readMore', newData.id, newData);\n  else return;\n}\n\nfunction refreshFavouritesStorage(myResult, newData) {\n  if (!myResult) users.setData('favourites', newData.id, newData);\n  else users.deleteData('favourites', newData.id);\n}\n\nfunction getDateForCreateObjToStorage() {\n  const date = new Date();\n\n  return date.getTime();\n}\n"],"names":["$jKfAL","parcelRequire","$2aa6ad8a8d772fe3$var$getDateForCreateObjToStorage","Date","getTime","document","querySelector","addEventListener","async","event","target","tagName","parentNode","children","classList","toggle","textContent","arrayChildren","newData","id","attributes","nodeValue","img","src","alt","title","descr","dateArticle","link","href","category","favouriteLinks","users","getAllData","myResult","deleteData","setData","$2aa6ad8a8d772fe3$var$refreshFavouritesStorage","error","console","log","add","date","readMoreList","$2aa6ad8a8d772fe3$var$refreshLinkStorage"],"version":3,"file":"favorite.976c1983.js.map"}